# unity测试项目4.16~4.19

unity版本：`2019.4.15f1c1`

## 需求分析

## 完成步骤

### 初始工作

1. 场景布置
   1. 创建摆放有集若干几何体的plane，玩家Player为胶囊体，给它添加材质以示区分
2. 添加联网功能
   1. 由于Network组件已被移除，需要从assert store导入Mirror插件
   2. 创建空物体
      1. 添加NetworManager组件
      2. 添加NetworkManagerHUD组件，用于显示GUI面板
   3. 给Player添加NetworkIdentity组件，表示这是一个网络对象
   4. 若没有添加NetworkTransform组件，客户端的画面将不能同步到服务端
3. 添加角色移动脚本`PlayerCtrl.cs`
   1. 导入Mirror包，脚本继承NetworkBehaviour
   2. 按wsad键表示前后左右移动
   3. 给Player添加camera组件实现第一人称



### 功能点1

**实现方式：**

*服务端选择Server Only模式，表示服务端仅作为服务器运行，不生成游戏控制对象。*

*移动端（另一个PC端）选择client模式，连接`localhost`*



在移动控制脚本的update函数中使用`isLocalPlayer`判断，当是本地对象是才能控制移动。

### 功能点2

**需求：**

1. 物体检测鼠标点击
2. 模型轮廓高亮
3. UI显示
4. 画面同步



实现：

1. 物体点击使用标签+射线
2. Shader

# 要求

上机测试题要求：
1. 本测试题为移动端（安卓）程序在局域网内控制PC端程序（如未接触过移动端发布，可改为局域网内两台电脑相互控制）
2. 自备一套简易三维场景，场景内包含地面，多个物体（可以是多个几何体），场景限制在一个正方形平面内，面积大小自拟
3. 移动端包含所有界面和三维场景，PC端只有三维场景和对应的交互显示内容

功能点一： 
移动端遥感界面：推动遥感，控制移动端画面，第一人称视角在几何体中穿梭，同时PC端画面与移动端同步

功能点二：
点击移动端场景中的三维模型，目标模型轮廓高亮，并出席UI显示物体信息（2D/3D界面均可），PC端画面与移动端同步

功能点三：
移动端左侧设置滑动按钮界面，每个按钮设置不同的点击事件，点击后PC端三维场景产生反馈，功能可自拟
例如：
按钮A事件：PC端程序播放视频，移动端出现相应的退出按钮
按钮B事件：PC端显示图片，移动端出现相应的退出按钮
按钮C事件：PC端出现加载界面并切换场景，PC端加载完场景后，移动端出现相应的返回原场景按钮，同时移动端与PC端的连接不会被切断，返回原场景后继续同步信息，且不会出现重复连接的情况(Unity-DontDestroyOnLoad的应用)
按钮D事件：按钮中嵌入Slider与其他按钮，与场景中的某物体的Material绑定，滑动、点击时该物体材质球的透明度以及其他属性随之改变
      ......
      可自由发挥，实现的功能越多越好。重复按钮数量越多越好（这里主要看是否使用模板生成的按钮，而不是一个个手动复制的）。

功能点四：
移动端右侧界面设置小地图，可显示正方形平面内的场景以及其中各个物体、和玩家所在位置的图标
具体要求如下：
a. 两种实现方式：俯视相机、算法计算（根据计算正方形平面的Scale与小地图图片宽高的比例，使用物体的3D空间坐标计算出物体在小地图中的2D坐标位置，以这种方法为佳，自己写的算法最好）
b. 大地图：通过点击放大按钮显示全屏大地图界面
c. 点击、拖拽事件：无论是大地图和小地图，都添加点击、拖拽事件，触发事件后地图中的玩家图标跟随点击的地点移动，场景中的玩家同步移动 (a中算法的逆计算)


测试交付内容：
1. 移动端及PC端运行文件（附说明，描述运行和局域网连接方法）
2. 移动端及PC端源代码



## 参考连接

Unity Mirror使用笔记：
https://blog.csdn.net/farcor_cn/article/details/110360424

Mirror联网插件
https://blog.csdn.net/qq_34673086/article/details/112765345?utm_medium=distribute.pc_relevant.none-task-blog-baidujs_title-1&spm=1001.2101.3001.4242

Unity Mirror联网插件的基本使用
https://www.v2know.com/MainPage/PreView/254

Unity官方文档-NetWork Manager
https://docs.unity3d.com/cn/2019.4/Manual/UNetManager.html

4.18
轮廓高亮
https://www.jianshu.com/p/23fb2f6fcfa0?from=singlemessage